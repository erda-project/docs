# 基于数据平台的标签群组构建

数据平台可采集业务系统产生的数据，经过一系列标准化处理后，按照约定输出至存储系统（默认为 ElasticSearch 或 ClickHouse），供业务读取，进行人群圈选，进而营销触达等。

![](https://terminus-paas.oss-cn-hangzhou.aliyuncs.com/paas-doc/2021/08/23/3712a89f-b70b-43a5-b2c5-164cbc71d1e1.png)

标签群组数据实施的基本流程如下：

1. 确认需求，确定输入数据来源、数据输出方式及格式。
2. 配置工作流，包括数据集成、清洗、萃取、数据导出、标签计算节点等，根据实际需求制定详细实施方案。
3. 业务系统查询 CDP 的标签指标，做列表展示。
4. 业务系统标签模块，在上述展示的指标上配置打标规则。
5. 业务系统标签配置点击同步，配置元数据下发 CDP 进行工作流运行。
6. 从 CDP 自动同步数据至 ES，验证无误后设定定时任务。
7. CDP 定时任务检测到标签计算结束，会回掉业务系统发送的 URL 通知更新状态。

## 前提条件

在着手实施之前，先需要明确这几点：

1. 群组圈选，想要圈到的是什么，是会员 ID，还是 OneID，还是手机号，还是微信 OpenID，这影响到在配置标签萃取节点时的数据配置。
2. 确定输入数据信息，包括：需要的字段来自于哪个数据库的哪张表的哪个字段；数据库链接信息；表的ddl语句。
3. 确定输出数据信息，包括：输出es的链接信息，输出的索引，输出的格式。

## 配置流程

此处工作流配置按照数据集成 > 数据计算 > 数据服务 > 标签配置的步骤进行。

1. 数据集成
   * 配置数据源
   * 配置源数据模型
   * 配置数据集成节点

2. 数据计算
   * 配置清洗节点
   * 配置萃取节点

3. 数据服务

   * 配置导出节点

   * 配置标签计算节点

可以对表中字段配置标签，数据平台会将源数据同步给会员平台，会员平台可以在此基础上给此字段添加规则，规则会同步到数据平台，数据平台就能根据字段上的规则进行计算，如果会员平台那边没有配置规则，那么此节点在执行时实际上是没有进行计算的。

举例：一百万数据，其中包含年龄字段。用户在标签计算节点中设置年龄字段作为指标，会员平台设置规则 age>18 为成年人，age<18 为未成年人，数据平台这边经过计算就能知道哪些是成年，哪些未成年。

4. 配置标签

   * 进入会员平台，标签群组-标签库-选择新增标签。

     ![](https://terminus-paas.oss-cn-hangzhou.aliyuncs.com/paas-doc/2021/08/23/293e0e29-2f8e-43e3-84e2-06dc3085184f.png)

   * 创建完成后，选择查看刚才创建的标签。

     ![](https://terminus-paas.oss-cn-hangzhou.aliyuncs.com/paas-doc/2021/08/23/6ddfaaeb-5fc5-4747-9cd1-c30a91715131.png)

   * 点击新增标签值。

     ![](https://terminus-paas.oss-cn-hangzhou.aliyuncs.com/paas-doc/2021/08/23/4884c8b7-dc09-41ed-b9af-ad3a1fc91094.png)

   * 设置萃取规则，萃取规则需要与萃取指标中的字段进行关联，设置逻辑。

     ![](https://terminus-paas.oss-cn-hangzhou.aliyuncs.com/paas-doc/2021/08/23/958699ce-5b65-4269-ad20-ebd9d4cd8f92.png)注意 点击同步之前必须先配置萃取规则，否则同步会返回错误。

   * 启用标签

     ![](https://terminus-paas.oss-cn-hangzhou.aliyuncs.com/paas-doc/2021/08/23/56f6b7b0-e3c9-44a3-a117-2f144b3917ea.png)

   * 同步标签。

     ![](https://terminus-paas.oss-cn-hangzhou.aliyuncs.com/paas-doc/2021/08/23/7ca51003-7a62-45cb-b9cd-61e035c4407f.png)

## 标签价值

对用户多维度信息通过数据平台进行标签化，可以低开发成本地构建用户标签体系，灵活地配置群组，更好的对用户进行集群归类，构建起企业目标用户的人群画像。通过对不同特征群组的区别化营销，通过对会员生命周期的监控，帮助企业构建精细化运营闭环，降本增效，提升客户满意度。
