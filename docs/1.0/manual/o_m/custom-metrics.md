# 自定义指标的告警配置

通过 [告警规则及处理方法](./alert-config.md) 章节知道可以配置一些内置的告警规则，调整相应的告警阈值，如果有相关的异常，就能发出对应的告警通知。

监控系统采集的指标非常多，覆盖面非常广，有系统自带的各种监控指标，也有用户通过 [Monitor SDK](../microservice/use-apm-monitor-app.md#自定义监控指标) 采集的自定义指标，有时候希望针对某些特定的指标定义一些告警规则，或者希望能够自定义告警通知的消息模版。

进入 **应用监控** 的 Addon 界面后，在 **应用监控/自定义告警** 的界面里，可以配置针对任意指标的告警以及对应的消息通知模版。

如图所示，配置了一条针慢SQL的告警规则：

![自定义告警](http://terminus-paas.oss-cn-hangzhou.aliyuncs.com/paas-doc/2020/07/03/00b28125-d0fa-4475-8458-f2d89835a704.jpg)

![自定义告警（接上图）](http://terminus-paas.oss-cn-hangzhou.aliyuncs.com/paas-doc/2020/07/03/5f3ce287-b3a1-4740-ae0c-1356db685735.jpg)

* 名称：规则的名称，可以根据规则含义取一个名称。
* 周期：是多久时间，对指标聚合产生一个结果。
* 过滤规则：是指对指标进行筛选，只针对某些指标进行告警规则的计算。
* 分组规则：是指按什么字段进行分组，然后每一组各自按告警规则进行计算。
* 字段规则：可以选择多个字段，进行聚合计算，针对计算的结果进行大于/小于/等于等，和定义的阈值进行判断，如果符合条件，则会发出告警。
* 通知方式：可以选择钉钉、邮箱、站内信等多种通知方式。
* 消息标题：可以定义告警发出来的消息标题模版。
* 消息内容：可以定义告警发出来的消息内容模版。

在消息标题和消息内容里，可以用花括号来引用对应指标的字段。包括 project_name、application_name、runtime_name、service_name、host_ip、cluster_name 等。

当定义完自定义告警后，相当于定义了一个告警规则的模版。

可以通过 [告警规则及处理方法](./alert-config.md) 里描述的那样，在 **告警通知** 里，选择刚定义的告警规则模版，来关联应用、通知组等，进一步配置具体的规则：

![使用自定义告警模板](http://terminus-paas.oss-cn-hangzhou.aliyuncs.com/paas-doc/2020/07/03/f2f89f92-8eba-4d3b-be07-895848847d7e.jpg)

配置完成后，当发现对应的指标满足配置的条件后，就会发出对应的告警通知，而通知内容就是按照消息内容模版渲染的。

