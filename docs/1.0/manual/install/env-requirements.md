# 软硬件环境需求

Erda 做为一款企业级的 PaaS 平台，可以很好的部署在各家云厂商的基础设施上，也可以部署在客户自建的 IDC 中。底层的基础设施可以直接选用物理机，也支持主流的虚拟化环境。

## 部署所需资源

Erda 支持两种部署模式：**私有化**、**SaaS 化**。具体的介绍可以参考《[选择部署模式](deployment-architecture.md)》

两种部署模式，Erda 对应的资源需求也不同。具体资源需求如下：

### 私有化部署所需资源

- 宿主机

| 分类           | CPU(核) | 内存(G) | 系统盘(G) | 数据盘(G) | 数量                                                   | 服务器用途                                   |
| :---------------- | -------------- | ------------ | ------- | ------- | --------- | --------- | ---------- | ------------ |
| 应用高可用管理 | 8  | 32  | 40G SSD | 200G SSD   | 3  | WEB负载均衡 和 集群高可用管理；3台 HA master |
| Erda平台      | 8  | 32  | 40G SSD | 200G SSD   | 4   | Erda平台，打包、部署、中间件管控、监控、微服务组件等   |
| 监控数据存储   | 8  | 32  | 40G SSD | 200G SSD + 500G HDD + 1T HDD | 3  | 部署 Cassandra(1T)、ElasticSearch(500G)、Kafka(200G) 等平台组件。建议 SSD； |

> 如果上阿里云，且整体项目资源评估的机器数量不超过 50 台，则可以省掉 **应用高可用管理** 的 3 台机器，直接使用[ **阿里云容器服务托管版**](https://www.aliyun.com/product/kubernetes?spm=5176.12825654.h2v3icoap.977.e9392c4a2MQa6c)。

- 数据库

  需要提供商用版 MySQL 数据库，版本要求 **5.7**。

- 网络文件存储服务

  上云的话可以直接选择云服务，比如阿里云的 NAS；

  客户自建 IDC 机房，如果无法提供类似的服务，可以额外再提供 3 台 `8 核 32G内存 40G 系统盘 500G 数据盘` 的服务器，Erda 实施团队可以基于 GlusterFS 部署该服务。

- 泛域名及 HTTPS 证书

  泛域名即 `* 域名`，比如 `*.app.terminus.io`

  考虑访问链路安全性，还需要提供对应泛域名的 HTTPS 证书，可[按需开启](../safe/enable-https.md)。

### SaaS 化部署所需资源

- 宿主机

| 分类           | CPU(核) | 内存(G) | 系统盘(G) | 数据盘(G) | 数量 | 服务器用途                                 |
| :------------- | ------- | ------- | --------- | --------- | ---------- | ------------ | ---- | ------------------------------------------ |
| 应用高可用管理 | 8       | 32      | 40G SSD   | 200G SSD   | 3    | WEB负载均衡、集群高可用管理、Erda  agents; |

> 如果上阿里云，且整体项目资源评估的机器数量不超过 50 台，则可以不需要提供 Erda 机器，直接使用 **阿里云容器服务托管版**。

- 网络文件存储服务

  上云的话可以直接选择云服务，比如阿里云的 NAS；

  客户自建 IDC 机房，如果无法提供类似的服务，可以额外再提供 3 台 `8 核 32G内存 40G 系统盘 500G 数据盘` 的服务器，Erda 实施团队可以基于 GlusterFS 部署该服务。

- 泛域名及 HTTPS 证书

  泛域名即 `* 域名`，比如 `*.app.terminus.io`

  考虑访问链路安全性，还需要提供对应泛域名的 HTTPS 证书（可按需提供）。



> 注意：当前只列了 Erda 部署所需的宿主机资源清单，实际 Erda 上运行的项目资源还需要额外评估。

## 操作系统版本要求

| Linux 操作系统平台       | 版本       |
| :----------------------- | :--------- |
| Red Hat Enterprise Linux | 7.4 及以上 |
| CentOS                   | 7.4 及以上 |

> 注意：
>
> - Erda 暂时只支持以上列表中的操作系统，其他的操作系统还未进行适配。
> - Erda 在 Centos 7.4、Centos 8 的环境下做过大量的测试，因此，建议优先选用 Centos 7.4 & Centos 8 来部署 Erda。
> - 以上 Linux 操作系统可运行在物理服务器以及 VMware、KVM、XEN 等主流虚拟化环境上。

## 网络要求

- 内网所有的机器端口互通。

- 建议所有机器能够访问外网。

  具体需要访问的域名及 IP 清单如下：

| 域名             | 用途                   |
| :---------------- | :---------------------- |
| *.aliyun.com     | yum 源，maven 源       |
| *.centos.org     | yum 源                 |
| *.aliyuncs.com   | oss，maven源，镜像加速 |
| *.docker.com     | 镜像                   |
| *.npm.taobao.org | npm 淘宝源             |
| *.npmjs.com      | npm 官方源             |
| *.maven.org      | maven 源               |
| *.terminus.io    | 端点资源               |
| *.baidu.com      | 地图，网络测试         |
| 114.114.114.114  | 电信DNS                |
| 223.5.5.5        | 阿里DNS                |
| 223.6.6.6        | 阿里DNS                |

- **应用高可用管理** （参考上面的宿主机资源清单）对应的机器需要对外开放 `80、443、1194` 端口，分别用于对外提供 HTTP、HTTPS、openvpn 服务。

## 客户端 Web 浏览器要求

Erda 平台提供了 Web 界面，支持白屏化操作。浏览器支持 chrome 70+ 或 Safari、Firefox、Edge 较新的版本。
