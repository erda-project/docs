# 为接口设置读写超时和传输限制

您可以通过流量入口下的 API 策略进行配置。

具体操作路径如下：

- 全局策略：进入 **微服务治理平台 > 项目列表 > 选择项目 > API 网关 > 流量入口管理**，选择对应的流量入口，点击 **详情 > 全局策略 > 业务策略 > 流量接收转发**。
- 具体 API 策略：进入 **微服务治理平台 > 项目列表 > 选择项目 > API 网关 > 流量入口管理**，选择对应的流量入口，点击 **详情** 后选择对应的 API，点击 **策略 > 业务策略 > 流量接收转发**。

## 示例一

若需求为：

- 允许客户端请求方在发送请求过程中，至多 100 秒无响应。
- 允许后端服务在响应应答过程中，至多 300 秒无响应。

则配置示意如下，点击 **提交** 后立即生效。

![](http://terminus-paas.oss-cn-hangzhou.aliyuncs.com/paas-doc/2021/10/20/371388d8-6c62-4fcd-a8fd-0343bc965256.png)

:::warning 警告

后端应答超时时间不宜过长，原因在于：

- 若后端应答超时时间设置过长，则高并发流量下，由于后端服务的性能问题，将导致维持大量的连接，最终影响网关的可用性。
- 使用云厂商的 SLB 服务时，通常会限制后端响应超时小于 90 秒，即使调高 API 网关的超时限制，也会因为云厂商 SLB 的限制，导致最终返回 504。

若后端响应时间过长，可根据不同场景通过以下方式优化：
1. 业务流程过于复杂导致的超时：进行业务流程的异步化改造。
2. 传输内容过大导致的超时：通常由于后端再次转发请求时未开启流式传输导致，例如接收请求后再上传 OSS 时未使用流式传输。

:::

## 示例二

若需求为允许客户端请求方上传 500 MB 以内的文件，则配置示意如下，点击 **提交** 后立即生效。

![](http://terminus-paas.oss-cn-hangzhou.aliyuncs.com/paas-doc/2021/10/20/8cb6962a-c59e-46d8-99f8-bbeca0e73dd2.png)


