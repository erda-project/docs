# 扩缩容

集群通过添加或删除机器实现扩缩容，以满足业务的动态资源需求。添加的机器可以是虚拟机（包含云主机）、物理机等。

## 添加机器
当集群资源不足时，您可以通过以下两种方式添加机器：
* 阿里云容器服务集群添加机器
* 一般集群添加机器

### 阿里云容器服务集群
对于阿里云容器服务集群，添加机器的操作步骤如下：
1. 在阿里云界面集进行扩容：进入 **阿里云容器服务集群（ACK）> 节点管理 > 节点**，点击 **集群扩容**。

   ![](https://terminus-paas.oss-cn-hangzhou.aliyuncs.com/paas-doc/2021/08/17/2e05301c-d98d-440a-abe5-134b3cecde73.png)

2. 在 Erda 平台添加机器：进入 **多云管理平台 > 资源管理 > 集群管理 > 添加机器**，添加阿里云容器服务集群（ACK）扩容出的节点。

   添加机器时需注意以下两点：

   * 添加机器时可一并设置合适的机器标签，具体请参见 [节点标签设置](./cluster-node-labels.md)。
   * 添加机器时，数据磁盘设备参数为可选项，若有数据盘则填写正确的盘符，若无则忽略。

   ::: tip 提示

   在 Erda 平台中完成机器添加后，机器才会被 Erda 纳管。
   :::

若用户提供直接购买的云主机 ECS，则需进入 **阿里云容器服务集群（ACK）> 节点管理 > 节点 > 添加已有节点**，加入该 ECS。

![](https://terminus-paas.oss-cn-hangzhou.aliyuncs.com/paas-doc/2021/08/17/bdfdb003-bb94-4bed-95f0-5c32fd518bc7.png)

### 一般集群
对于非阿里云容器服务集群，直接在 Erda 平台添加机器即可。

## 下线机器
如需下线机器，请先进入 **多云管理平台 > 集群总览 > 机器列表**，选择机器后点击 **下线**，再真正释放下线，否则 Erda 将误以为机器宕机而产生误告警。

下线机器前，需注意以下两点：

* 为防止影响业务或丢失业务数据，目标机器上不能存在运行中的 Addon，如有，需手动迁移后方可下线。
* 请勿下线关键功能运行的节点，例如包含 LB、Master、Cassandra、ES、Kafka、Nexus 标签的宿主机。
